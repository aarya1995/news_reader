<div class="container content-area" style="margin-bottom: 5%;">
<h1> Top stories from BBC </h1>
<hr style="border-top: 1px solid #3D3D3D;">

 <div class="grid">
	<% @stories.each do |story| %>
	<div class="card float-left grid-item">

	  <div class="card-image">
	  	<% if story.image.nil? %>
	  	  <a href = "<%= story.url %>" >
			<img src="/assets/kwiknews-secondary.png"/>
		  </a>
		<% else %>
		  <a href = "<%= story.url %>" >
			<img src="<%= story.image %>"/>
		  </a>
		<% end %>
		<h3 class="story-title"><%= story.name %></h3>		
	  </div>
	  <p><%= story.summary %></p>
	  <hr class="card-hr">
	  <p class="story-date" style="margin-bottom: 5px;">Date published: <%= format_time(story.published_at.to_s) %> </p>
	</div>

	<% end %>

	<div id="infinite-scrolling">
	  <%= will_paginate @stories %>
	</div>
 </div> <!-- end of grid div -->
</div> <!-- end of container div -->

<script>
  var $grid = $('.grid').imagesLoaded( function() {
		$('.grid').masonry({
		  // options
		  itemSelector: '.grid-item',
		  columnWidth: 300
		});
   });
	
	// infinitescroll() is called on the element that surrounds 
// the items you will be loading more of
  $('.grid').infinitescroll({
 
    navSelector  : ".infinite-scrolling",            
                   // selector for the paged navigation (it will be hidden)
    nextSelector : ".infinite-scrolling a:first",    
                   // selector for the NEXT link (to page 2)
    itemSelector : ".grid-item"          
                   // selector for all items you'll retrieve
  });

  $(window).unbind('.infscr');
  $(document).trigger('retrieve.infscr');

</script>